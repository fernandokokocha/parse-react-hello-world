<!doctype html>
<head>
  <meta charset="utf-8">

  <title>Uszanowanko</title>
  <meta name="description" content="My Parse App">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  <link href="css/style.css" rel="stylesheet">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="build/react.js"></script>
  <script src="build/react-dom.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
  <script type="text/javascript" src="https://www.parsecdn.com/js/parse-1.5.0.min.js"></script>
  <script type="text/javascript" src="https://www.parsecdn.com/js/parse-react.js"></script>
  <script type="text/javascript">
    Parse.initialize("Lj4OCrsV1meLIIuvVEsxXKyvS3Duz0Qn6DcXQEyt", "SdFWqDCVkZzEa7YoPUVauKpuOiHyOPQUQCoxs6XH");
  </script>
</head>


<body>

  <nav class="navbar navbar-inverse navbar-fixed-top">
     <div class="container">
       <div class="navbar-header">
         <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
           <span class="sr-only">Toggle navigation</span>
           <span class="icon-bar"></span>
           <span class="icon-bar"></span>
           <span class="icon-bar"></span>
         </button>
         <a class="navbar-brand" href="#">PVB Admin Panel</a>
       </div>
       <div id="navbar" class="collapse navbar-collapse">
         <ul class="nav navbar-nav">
           <li class="active"><a href="#">TODO</a></li>
           <li><a href="#">Shops</a></li>
         </ul>
       </div><!--/.nav-collapse -->
     </div>
   </nav>

  <div class="starter-template">
   <div class="row">
     <div class="col-lg-4">
         <div id="to-replace" />
     </div>
   </div>
 </div>


<script type="text/babel">
  var TurboItem = React.createClass({
    onRemove: function(e) {
      ParseReact.Mutation.Destroy(this.props.item).dispatch();
    },
    render: function() {
      var item = this.props.item;
      return (
        <tr key={item.id}>
          <td>
            {item.foo}
          </td>
          <td>
            <a onClick={this.onRemove}>
              <span className="glyphicon glyphicon-remove" aria-hidden="true"></span>
            </a>
          </td>
        </tr>
      )
    }
  });

  var TurboList = React.createClass({
    mixins: [ParseReact.Mixin],
    getInitialState: function() {
      return {text: ''};
    },
    onChange: function(e) {
      this.setState({text: e.target.value});
    },
    handleSubmit: function(e) {
      e.preventDefault();
      ParseReact.Mutation.Create('TestObject', {
        foo: this.state.text
      }).dispatch();
      this.setState({text: ''});
    },
    observe: function() {
      return {
        testObjects: (new Parse.Query('TestObject')).ascending('createdAt')
      };
    },
    render: function() {
      var onRemove = this.onRemove;
      return (
        <div>
          <form className="form-inline" onSubmit={this.handleSubmit}>
            <div className="form-group">
              <label for="input-task">Add task</label>
              <input type="text" className="form-control" id="input-task" placeholder="Do stuff" onChange={this.onChange} value={this.state.text} />
            </div>
            <button type="submit" className="btn btn-primary">Add</button>
          </form>
          <table className="table table-striped table-bordered table-hover table-condensed">
          <thead>
            <tr>
              <th>TODO</th>
              <th>Remove</th>
            </tr>
          </thead>
          <tbody>
            {this.data.testObjects.map(function(item, index) {
              return <TurboItem item={item} key={item.id} />;
            })}
          </tbody>
          </table>
        </div>
      );
    }
  });
  ReactDOM.render(<TurboList/>, document.getElementById('to-replace'));

</script>

</html>
